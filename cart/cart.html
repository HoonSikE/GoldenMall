<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="images/png" href="/asset/icon.png">
    <title>Golden Mall</title>
    <link rel="stylesheet" href="/css/base.css" type="text/css" />
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <script src="/js/GoogleAnalyticsBuilder.js"></script>
    <script>
        // 페이지뷰
        let pageviewObj = {
            // 방문 페이지 제목
            title: '장바구니>장바구니 홈',

            // 이벤트 매개변수
            ep_page_name: '장바구니>장바구니 홈',            
            ep_visit_channel: 'PCWeb',
            ep_login_yn: 'Y',
            ep_dow: '화',

            // 사용자 속성
            up_uid: 'hhpark',
            up_type: '개인',
            up_age: '20대',
            up_gender: 'M',
            up_joindate: '20240604'
        };
        sendGAPage(pageviewObj);
        console.log(window.dataLayer);

        // 전자 상거래
        // 기본 정보
        let eventData = {
            event_name: 'view_cart',
            ep_ecommerce: 'view_cart',
        };
        // 거래 정보
        let transaction = {
            currency: 'KRW',
        };
        // 상품 정보
        let productShoes1 = {
            item_id: 'VANS_12345',
            item_brand: 'Vans',
            item_name: '반스 운동화 올드스쿨 블랙',
            item_variant: 'Black',
            price: 18860.0,
            affiliation: 'Golden Mall',
            coupon: 'SUMMER_FUN',
            item_category: 'Clothes',
            item_category2: 'Shoes',
        };

        let items = [productShoes1];

        sendGAEcommerce(eventData, transaction, items);
    </script>
    <script src="/js/script.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WPC9HDZQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="header"></div>
    
    <div class="container-button">
        <div class="product">
            <div class="product-list">
                <div class="product-list-title">
                    장바구니 목록
                </div>
            </div>
            <div class="product-list">
                <div class="product-info">
                    <img class="product-info-img" src="/asset/product/img_shoes1.jpg" alt=""/>
                </div>
                <div class="product-info">
                    <div class="product-info-title">Vans</div>
                    <div class="product-info-content">올드스쿨 블랙</div>
                    <div class="product-info-price">
                        <div class="product-info-price1">48,860</div>
                        <div class="product-info-price2">원</div>
                    </div>
                </div>
            </div>
            <div class="product-list">
                <div class="product-info">
                    <img class="product-info-img" src="/asset/product/img_clothes2.jpg" alt=""/>
                </div>
                <div class="product-info">
                    <div class="product-info-title">꼼데가르송</div>
                    <div class="product-info-content">PLAY 반팔티셔츠</div>
                    <div class="product-info-price">
                        <div class="product-info-price1">123,000</div>
                        <div class="product-info-price2">원</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-list">
            <div class="product-list-title">총 상품 가격</div>
        </div>
        <div class="product">
            <div class="product-list">
                <div class="product-info-content">총 상품 가격</div>
                <div class="product-info-content">172,860 원</div>
            </div>
            <div class="product-list">
                <div class="product-info-content">총 배송비</div>
                <div class="product-info-content">3,000 원</div>
            </div>
        </div>
        <div class="product-list">
            <div class="product-info-content">
                총 결제 예상 금액
            </div>
            <div class="product-info-price">
                <div class="product-info-price1">175,860</div>
                <div class="product-info-price2">원</div>
            </div>
        </div>
    </div>

    <div class="main-button-backgroundcolor">
        <div style="width: 50%;">
            <button class="sub-button" onclick="removeCart()">제 거</button>    
        </div>
        <div style="width: 50%;">
            <button class="main-button" onclick="eventMoveProductCheckout()">구 매</button>    
        </div>
    </div>

    <div id="nav"></div>
</body>

<script>
    $(function(){
        $("#header").load("/component/header.html", function(){
        });
        $("#nav").load("/component/nav.html", function(){
            var moveMyPage = document.getElementById("move-cart");
            moveMyPage.src = "/asset/icon/ic_cart2.png";
        });
    });

    function removeCart() {
        // 전자 상거래
        // 기본 정보
        let eventData = {
            event_name: 'remove_from_cart',
            ep_ecommerce: 'remove_from_cart',
        };
        // 거래 정보
        let transaction = {
            currency: 'KRW',
        };
        // 상품 정보
        let productShoes1 = {
            item_id: 'VANS_12345',
            item_brand: 'Vans',
            item_name: '반스 운동화 올드스쿨 블랙',
            item_variant: 'Black',
            price: 18860.0,
            affiliation: 'Golden Mall',
            coupon: 'SUMMER_FUN',
            item_category: 'Clothes',
            item_category2: 'Shoes',
            index: 0,
            quantity: 1,
        };

        let productShirt1 = {
            item_id: 'COMME_777',
            item_brand: '꼼데가르송',
            item_name: 'PLAY 반팔티셔츠',
            item_variant: 'White',
            price: 123.000,
            affiliation: 'Golden Mall',
            item_category: 'Clothes',
            item_category2: 'Shirt',
            index: 1,
            quantity: 1,
        };

        let items = [productShoes1, productShirt1];

        sendGAEcommerce(eventData, transaction, items);
    }

    function eventMoveProductCheckout(){
        // 전자 상거래
        // 기본 정보
        let eventData = {
            event_name: 'begin_checkout',
            ep_ecommerce: 'begin_checkout',
        };
        // 거래 정보
        let transaction = {
            currency: 'KRW',
        };
        // 상품 정보
        let productShoes1 = {
            item_id: 'VANS_12345',
            item_brand: 'Vans',
            item_name: '반스 운동화 올드스쿨 블랙',
            item_variant: 'Black',
            price: 18860.0,
            affiliation: 'Golden Mall',
            coupon: 'SUMMER_FUN',
            item_category: 'Clothes',
            item_category2: 'Shoes',
            index: 0,
            quantity: 1,
        };

        let productShirt1 = {
            item_id: 'COMME_777',
            item_brand: '꼼데가르송',
            item_name: 'PLAY 반팔티셔츠',
            item_variant: 'White',
            price: 123.000,
            affiliation: 'Golden Mall',
            item_category: 'Clothes',
            item_category2: 'Shirt',
            index: 1,
            quantity: 1,
        };

        let items = [productShoes1, productShirt1];

        sendGAEcommerce(eventData, transaction, items);

        moveProductCheckout();
    }
</script>
</html>